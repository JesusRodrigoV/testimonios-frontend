<div class="feed-container">
  <h2>Testimonios del Bicentenario</h2>

  <div class="search-bar">
    <input
      type="text"
      [(ngModel)]="searchKeyword"
      (input)="onSearch()"
      placeholder="Buscar testimonios..."
    />
  </div>

  <div class="testimony-feed">
    @defer {
      <div class="testimonies-wrapper">
        @for (testimony of testimonies; track testimony.id) {
          <app-testimony [testimony]="testimony"></app-testimony>
        } @empty {
          <p>No hay testimonios</p>
        }
      </div>
    } @placeholder (minimum 500ms) {
      <axl-spinner />
      <div class="skeleton-container">
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
      </div>
    } @loading (minimum 1s; after 500ms) {
      <div class="loading">
        <axl-spinner />
        <p>Cargando testimonios...</p>
      </div>
    } @error {
      <div class="error">
        <p>Error al cargar los testimonios. Por favor, intenta de nuevo.</p>
      </div>
    }

    <div id="loadMoreTrigger" *ngIf="hasMore && !loading"></div>
  </div>
</div>
