<div class="home-container" [class.dark-mode]="isDarkMode">
  <!-- Banner principal -->
  <section class="hero-section">
    <h1>Testimonios del Bicentenario de Bolivia</h1>
    <p>
      Explora y preserva la memoria histórica de Bolivia a través de testimonios
      orales, escritos y audiovisuales de eventos históricos significativos.
    </p>
    <div class="hero-actions">
      <button mat-raised-button color="accent" routerLink="/submit-testimony">
        <mat-icon>add</mat-icon>
        Contribuir Testimonio
      </button>
      <button mat-raised-button color="primary" routerLink="/explore">
        <mat-icon>explore</mat-icon>
        Explorar Testimonios
      </button>
    </div>
  </section>

  <!-- Búsqueda avanzada -->
  <section class="search-section mat-elevation-z2">
    <h2>Búsqueda Avanzada</h2>
    <div class="search-filters">
      <mat-form-field appearance="outline">
        <mat-label>Buscar testimonios</mat-label>
        <input
          matInput
          [(ngModel)]="searchQuery"
          placeholder="Palabras clave..."
        />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Tipo de testimonio</mat-label>
        <mat-select [(ngModel)]="selectedTypes" multiple>
          @for (type of types; track type) {
            <mat-option [value]="type">{{ type }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Región</mat-label>
        <mat-select [(ngModel)]="selectedRegion">
          @for (region of regions; track region) {
            <mat-option [value]="region">{{ region }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Rango de fechas</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input
            matStartDate
            placeholder="Fecha inicial"
            [(ngModel)]="selectedDateRange.start"
          />
          <input
            matEndDate
            placeholder="Fecha final"
            [(ngModel)]="selectedDateRange.end"
          />
        </mat-date-range-input>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
    </div>
  </section>

  <!-- Testimonios destacados -->
  <section class="featured-testimonies">
    <div class="section-header">
      <h2>Documentos Destacados</h2>
      <mat-form-field appearance="outline" class="search-field">
        <mat-icon matPrefix>search</mat-icon>
        <input
          matInput
          placeholder="Buscar documentos..."
          [(ngModel)]="searchQuery"
        />
      </mat-form-field>
    </div>

    <div class="testimonies-grid">
      @for (testimony of testimonies; track testimony.id) {
        <mat-card class="testimony-card" [class.featured]="testimony.featured">
          <div class="testimony-media" [ngSwitch]="testimony.type">
            @switch (testimony.type) {
              @case ("video") {
                <div class="video-thumbnail">
                  <img [src]="testimony.thumbnail" [alt]="testimony.title" />
                  <mat-icon class="media-icon">play_circle</mat-icon>
                </div>
              }
              @case ("audio") {
                <div class="audio-thumbnail">
                  <img [src]="testimony.thumbnail" [alt]="testimony.title" />
                  <mat-icon class="media-icon">audiotrack</mat-icon>
                </div>
              }
              @default {
                <img
                  [src]="testimony.thumbnail"
                  [alt]="testimony.title"
                  mat-card-image
                />
              }
            }
          </div>
          <mat-card-content>
            <div class="testimony-header">
              <h3>{{ testimony.title }}</h3>
              @if (testimony.status === "restricted") {
                <mat-icon
                  class="restricted-icon"
                  matTooltip="Acceso restringido"
                  >lock</mat-icon
                >
              }
            </div>
            <p class="testimony-meta">
              <span class="date">{{ testimony.date | date }}</span>
              <span class="location">
                <mat-icon>location_on</mat-icon>
                {{ testimony.location.name }}
              </span>
              <span class="type" [class]="testimony.type">
                <mat-icon>{{
                  testimony.type === "video"
                    ? "videocam"
                    : testimony.type === "audio"
                      ? "mic"
                      : "article"
                }}</mat-icon>
                {{ testimony.type }}
              </span>
            </p>
            <p class="testimony-description">{{ testimony.description }}</p>
            <mat-chip-listbox>
              @for (tag of testimony.tags; track tag) {
                <mat-chip-option>{{ tag }}</mat-chip-option>
              }
            </mat-chip-listbox>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">
              <mat-icon>visibility</mat-icon>
              Ver Testimonio
            </button>
            <div class="testimony-stats">
              <button
                mat-icon-button
                [matBadge]="testimony.commentsCount"
                matBadgeColor="accent"
              >
                <mat-icon>comment</mat-icon>
              </button>
              <button
                mat-icon-button
                [matBadge]="testimony.likes"
                matBadgeColor="primary"
              >
                <mat-icon>favorite</mat-icon>
              </button>
              <button mat-icon-button>
                <mat-icon>share</mat-icon>
              </button>
            </div>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  </section>

  <!-- Filtros y categorías -->
  <section class="filters-section">
    <mat-card>
      <mat-card-content>
        <h3>Filtrar por:</h3>
        <mat-chip-listbox
          aria-label="Categorías"
          [(ngModel)]="selectedCategories"
        >
          @for (category of categories; track category) {
            <mat-chip-option [value]="category">{{ category }}</mat-chip-option>
          }
        </mat-chip-listbox>
      </mat-card-content>
    </mat-card>
  </section>
</div>
