<form [formGroup]="form" (ngSubmit)="onSubmit.emit(form.value)">
    <div class="input-container">
      <div class="input-group">
        <mat-icon>person</mat-icon>
        <input
          class="custom-input"
          type="text"
          placeholder="Nombre de usuario"
          formControlName="nombre"
        />
      </div>
      @if (form.get("nombre")?.errors?.["required"] && form.get("nombre")?.touched) {
        <span class="error-text">El nombre es requerido</span>
      }
      @if (form.get("nombre")?.errors?.["minlength"] && form.get("nombre")?.touched) {
        <span class="error-text">El nombre debe tener al menos 3 caracteres</span>
      }
    </div>
  
    <div class="input-container">
      <div class="input-group">
        <mat-icon>mail</mat-icon>
        <input
          class="custom-input"
          type="email"
          placeholder="Email"
          formControlName="email"
        />
      </div>
      @if (form.get("email")?.errors?.["required"] && form.get("email")?.touched) {
        <span class="error-text">El email es requerido</span>
      }
      @if (form.get("email")?.errors?.["email"] && form.get("email")?.touched) {
        <span class="error-text">Email inválido</span>
      }
    </div>
  
    <div class="input-container">
      <div class="input-group">
        <mat-icon>lock</mat-icon>
        <input
          class="custom-input"
          [type]="hidePassword ? 'password' : 'text'"
          placeholder="Contraseña"
          formControlName="password"
        />
        <button
          class="visibility-toggle"
          type="button"
          (click)="hidePassword = !hidePassword"
        >
          <mat-icon>{{ hidePassword ? "visibility_off" : "visibility" }}</mat-icon>
        </button>
      </div>
      @if (form.get("password")?.errors?.["required"] && form.get("password")?.touched) {
        <span class="error-text">La contraseña es requerida</span>
      }
      @if (form.get("password")?.errors?.["minlength"] && form.get("password")?.touched) {
        <span class="error-text">La contraseña debe tener al menos 6 caracteres</span>
      }
    </div>
  
    <div class="input-container">
      <div class="input-group">
        <mat-icon>lock</mat-icon>
        <input
          class="custom-input"
          [type]="hideConfirmPassword ? 'password' : 'text'"
          placeholder="Confirmar Contraseña"
          formControlName="confirmPassword"
        />
        <button
          class="visibility-toggle"
          type="button"
          (click)="hideConfirmPassword = !hideConfirmPassword"
        >
          <mat-icon>{{ hideConfirmPassword ? "visibility_off" : "visibility" }}</mat-icon>
        </button>
      </div>
      @if (
        form.get("confirmPassword")?.errors?.["required"] &&
        form.get("confirmPassword")?.touched
      ) {
        <span class="error-text">Confirma tu contraseña</span>
      }
      @if (
        form.errors?.["mismatch"] &&
        form.get("confirmPassword")?.touched
      ) {
        <span class="error-text">Las contraseñas no coinciden</span>
      }
    </div>
  
    <div class="input-container">
      <div class="input-group">
        <mat-icon>description</mat-icon>
        <textarea
          class="custom-input"
          placeholder="Biografía (opcional)"
          formControlName="biografia"
          rows="3"
        ></textarea>
      </div>
    </div>
  
    <div class="login-link">
      <a routerLink="/login">¿Ya tienes cuenta? Inicia sesión</a>
    </div>
  
    <button
      mat-raised-button
      color="primary"
      type="submit"
      class="action-button"
      [disabled]="form.invalid || loading"
    >
      {{ loading ? "Registrando..." : buttonText }}
    </button>
  
    @if (error) {
      <mat-error class="error-message">{{ error }}</mat-error>
    }
  </form>